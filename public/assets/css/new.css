/* ==========================================================
   PRINT.CSS (80mm receipt + mobile preview)
   - No HTML changes required
   - Screen: looks like an 80mm receipt preview (big, readable)
   - Print: outputs as 80mm roll and hides action buttons
   ========================================================== */

:root{
  /* 80mm paper effective width is usually a bit less due to printer margins,
     so use 72-76mm as "content width" for preview/print. */
  --paper-80mm: 80mm;
  --receipt-width: 76mm;

  --ink: #000;
  --muted: #444;
  --line: #000;

  --ui-bg: #f3f4f6;
  --card: #fff;
  --shadow: 0 10px 30px rgba(0,0,0,.10);
}

*{ box-sizing: border-box; }

html, body{
  margin:0;
  padding:0;
  color: var(--ink);
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  -webkit-text-size-adjust: 100%;
}

/* =========================
   SCREEN (Mobile Preview)
   ========================= */
@media screen{
  body{
    background: var(--ui-bg);
    /* space for fixed bottom buttons */
    padding: 14px 12px 92px;
  }

  /* The key: constrain invoice to receipt width so it is NOT tiny on phone.
     It will appear big because it uses real 76mm width, not full A4 scaling. */
  .invoice{
    width: min(var(--receipt-width), 100%);
    margin: 0 auto;
    background: var(--card);
    border-radius: 12px;
    box-shadow: var(--shadow);
    padding: 10px 10px 12px;
  }

  .invoice-header{
    text-align:center;
    padding: 6px 0 10px;
    border-bottom: 1px dashed #777;
    margin-bottom: 10px;
  }

  .invoice-header img{
    display:block;
    margin: 0 auto 6px;
    max-width: 60mm;
    max-height: 20mm;
    object-fit: contain;
  }

  .invoice-header h1{
    margin: 0;
    font-size: 14px;
    font-weight: 800;
    letter-spacing: .2px;
  }

  .invoice-info{
    margin: 0 0 10px 0;
  }

  .invoice-info h2{
    margin: 0 0 6px 0;
    font-size: 12.5px;
    font-weight: 800;
  }

  .invoice-info p{
    margin: 2px 0;
    font-size: 12px;
    color: var(--muted);
  }

  .table-responsive{
    width: 100%;
    overflow: visible; /* receipt shouldn't scroll horizontally */
  }

  table{
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    font-size: 12px;

    /* IMPORTANT: remove the min-width that makes it shrink/scale weird on mobile */
    min-width: 0 !important; /* overrides your old min-width:350px [file:1] */
  }

  th, td{
    border-top: 1px solid var(--line);
    border-bottom: 1px solid var(--line);
    padding: 6px 4px;
    vertical-align: top;
  }

  thead th{
    border-top: 1px solid var(--line);
    font-weight: 900;
    text-transform: none;
    font-size: 12px;
  }

  /* Column sizing tuned for receipt */
  th.col-no, td.col-no{ width: 10% !important; text-align: left; }
  th.col-name, td.col-name{ width: 70% !important; text-align: left; }
  th.col-qty, td.col-qty{ width: 20% !important; text-align: right; white-space: nowrap; }

  td.col-name{
    white-space: normal !important;
    overflow-wrap: anywhere;
    word-break: break-word;
  }

  tfoot td{
    font-weight: 900;
  }

  /* Text below table (Tangerang/date + Admin) */
  .table-responsive > p{
    margin: 12px 0 0;
    font-size: 12px;
    color: var(--ink);
  }

  /* the footer table exists but is empty in your markup; keep it harmless */
  table.footer{
    width: 100%;
    border: 0;
  }

  /* =========================
     Bottom action bar (3 buttons)
     ========================= */
  .header-action{
    position: fixed;
    left:0;
    right:0;
    bottom:0;
    z-index: 9999;
    background: rgba(243,244,246,.92);
    backdrop-filter: blur(8px);
    border-top: 1px solid #dcdcdc;
    padding: 10px 10px calc(10px + env(safe-area-inset-bottom));
  }

  .header-action nav{
    width: min(520px, 100%);
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1fr 1fr; /* Back | Print | Excel */
    gap: 10px;
  }

  .header-action nav a{
    display:flex;
    align-items:center;
    justify-content:center;
    height: 44px;
    border-radius: 12px;
    border: 1px solid #cfcfcf;
    background: #fff;
    color: #111;
    text-decoration:none;
    font-weight: 800;
    font-size: 14px;
    line-height: 1;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    box-shadow: 0 2px 10px rgba(0,0,0,.06);
  }

  /* Your HTML marks Print link with class="cursor" */
  .header-action nav a.cursor{
    background: #111;
    color: #fff;
    border-color: #111;
  }

  .header-action nav a:active{
    transform: translateY(1px);
  }
}

/* =========================
   PRINT (80mm receipt output)
   ========================= */
@media print{
  /* Print to 80mm roll */
  @page{
    size: var(--paper-80mm) auto;
    margin: 0; /* maximize printable area */
  }

  html, body{
    margin:0 !important;
    padding:0 !important;
    width: 100% !important;
    height: auto !important;
    background: #fff !important;
    color: #000 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
    font-family: "Courier New", ui-monospace, monospace;
  }

  /* Hide UI buttons */
  .header-action,
  nav,
  button,
  .no-print,
  .action-bar{
    display:none !important;
  }

  /* Force receipt width in print */
  .invoice,
  .table-responsive{
    width: var(--paper-80mm) !important;
    max-width: var(--paper-80mm) !important;
    margin: 0 !important;
    padding: 0 !important;
    background: transparent !important;
    box-shadow: none !important;
    border-radius: 0 !important;
  }

  .invoice-header{
    text-align:center;
    padding: 0 0 5mm 0;
    margin: 0 0 3mm 0;
    border-bottom: 1px dashed #000;
  }

  .invoice-header img{
    display:block;
    margin: 0 auto 2mm;
    max-width: 65mm;
    max-height: 18mm;
    object-fit: contain;
  }

  .invoice-header h1{
    margin:0;
    font-size: 12pt;
    font-weight: 700;
  }

  .invoice-info{
    margin: 0 0 3mm 0;
    padding: 0;
  }

  .invoice-info h2{
    margin: 0 0 2mm 0;
    font-size: 11pt;
    font-weight: 700;
  }

  .invoice-info p{
    margin: 0 0 1.2mm 0;
    font-size: 10.5pt;
  }

  table{
    width: 100% !important;
    border-collapse: collapse !important;
    table-layout: fixed !important;
    font-size: 10.5pt;
    min-width: 0 !important;
  }

  th, td{
    border-top: 1px solid #000 !important;
    border-bottom: 1px solid #000 !important;
    padding: 2.2mm 1.6mm !important;
    vertical-align: top !important;
  }

  thead th{
    font-weight: 900;
  }

  th.col-no, td.col-no{ width: 10% !important; text-align:left !important; }
  th.col-name, td.col-name{ width: 70% !important; text-align:left !important; }
  th.col-qty, td.col-qty{ width: 20% !important; text-align:right !important; white-space: nowrap !important; }

  td.col-name{
    white-space: normal !important;
    overflow-wrap: anywhere !important;
  }

  tfoot td{
    font-weight: 900;
  }

  /* Keep header row repeating if long receipt */
  thead{ display: table-header-group; }
  tfoot{ display: table-row-group; }

  /* avoid breaking inside rows */
  tr, td, th{ page-break-inside: avoid !important; }

  .table-responsive > p{
    margin: 4mm 0 0 0;
    font-size: 10.5pt;
  }

  table.footer{ border: 0 !important; }
}
